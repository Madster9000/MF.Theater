@{
    ViewBag.Title = "Админка";
}

@section scripts
{
    <script src="~/Content/Services/MessagesService.js"></script>
    <script src="~/Content/Services/PerfomancesService.js"></script>
    <script src="~/Content/Services/PagesService.js"></script>

    <script src="~/Content/ViewModels/PlayPeriodViewModel.js"></script>
    <script src="~/Content/ViewModels/CreatePerfomanceViewModel.js"></script>
    <script src="~/Content/ViewModels/AdminPageViewModel.js"></script>
}

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#CreatePerfomanceModal" style="margin: 5px 0 0 0">Создать</button>

<div id="CreatePerfomanceModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Создание постановки</h4>
            </div>
            <form>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="nameField">Название:</label>
                        <input type="text" class="form-control" id="nameField" data-bind="value: PerfomanceViewModel.Name">
                    </div>
                    <div class="form-group">
                        <label for="descriptionField">Описание:</label>
                        <textarea class="form-control" id="descriptionField" data-bind="value: PerfomanceViewModel.Description"></textarea>
                    </div>



                    <fieldset>
                        <legend>Периоды постановки</legend>
                        <ul class="list-inline" data-bind="foreach: PerfomanceViewModel.PlayPeriods">
                            <li>
                                <label for="nameField">Начало:</label>
                                <input type="text"
                                       class="form-control datetimepicker"
                                       data-provide="datetimepicker"
                                       data-bind="value: StartDate"
                                       @*data-date-format="dd.mm.yyyy hh.ii"*@
                                       data-date-autoclose="true">
                            </li>
                            <li>
                                <label for="nameField">Конец:</label>
                                <input type="text"
                                       class="form-control datetimepicker"
                                       data-provide="datetimepicker"
                                       data-bind="value: EndDate"
                                       @*data-date-format="dd.mm.yyyy hh.ii"*@
                                       data-date-autoclose="true">
                            </li>
                            <li>
                                <label for="nameField">Количество билетов:</label>
                                <input type="text" class="form-control" data-bind="value: TicketsCapacity">
                            </li>
                        </ul>
                    </fieldset>
                    <button type="button" class="btn btn-success" data-bind="click: AddPeriod" style="width: 100%">Добавить период</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal" data-bind="click: CreatePerfomance">Создать</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
                </div>
            </form>

        </div>

    </div>
</div>

<div id="PageBody">
    <div data-bind="foreach: Perfomances">
        <h3 data-bind="text: Name"></h3>
        <p data-bind="text: Description"></p>

        <ul class="list-group" data-bind="foreach: PlayPeriods">
            <li class="list-group-item">
                <ul class="list-inline">
                    <li>
                        <div class="panel panel-primary">
                            <div class="panel-heading">Начало:</div>
                            <div class="panel-body" data-bind="text: StartDate"></div>
                        </div>
                    </li>
                    <li>
                        <div class="panel panel-primary">
                            <div class="panel-heading">Конец:</div>
                            <div class="panel-body" data-bind="text: EndDate"></div>
                        </div>
                    </li>
                    <li>
                        <div class="panel panel-primary">
                            <div class="panel-heading">количество билетов:</div>
                            <div class="panel-body" data-bind="text: TicketsCapacity"></div>
                        </div>
                    </li>

                </ul>
            </li>
        </ul>

        <hr />
    </div>

    <ul class="pagination" data-bind="foreach: PagesArray">
        <li><span data-bind="text: itemIndex, click: $parent.ApplyPage" style="cursor: pointer"></span></li>
    </ul>
</div>


